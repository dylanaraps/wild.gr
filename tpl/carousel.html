---
# Copyright 2025-2026 - Dylan Araps - All Rights Reserved
set -- $images
---
<style>
#$id {
  margin: 2rem auto;
  overflow: hidden;
  position: relative;
  width: 100%;
}

#$id::before {
  content: "";
  display: block;
  padding-top: 56.25%;
}

#$id input,
.carousel-nav {
  display: none;
}

#$id .carousel-slides {
  bottom: 0;
  display: flex;
  height: 100%;
  left: 0;
  position: absolute;
  right: 0;
  top: 0;
  transition: transform 0.5s ease;
}

#$id figure,
#$id img {
  flex: 0 0 100%;
  height: 100%;
  object-fit: ${fit:-contain} !important;
  width: 100%;
}

${circle:+"#$id .carousel-slides *:first-child {
  background: none !important;
}

#$id .carousel-slides *:first-child img {
  object-fit: cover !important;
  clip-path: circle(50% at 50% 50%);
}"}

#$id .carousel-nav {
  justify-content: space-between;
  padding: 0 1rem;
  pointer-events: none;
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 100%;
}

#$id .carousel-nav label {
  background-position: center !important;
  background-repeat: no-repeat !important;
  background-size: 64px;
  background: var(--arrow);
  color: rgba(255, 255, 255, .7);
  cursor: pointer;
  filter: drop-shadow(0 10px 20px rgba(0,0,0,.4));
  font-family: var(--font-copy);
  font-size: 3rem;
  padding: 100vh clamp(.5rem, calc(.125rem + 1.875vw), 2rem);
  overflow: hidden;
  pointer-events: all;
  user-select: none;
}

#$id .carousel-nav label:first-child {
  padding-right: 32px;
  transform: scaleX(-1);
}

#$id .carousel-nav label:last-child {
  padding-left: 32px;
}

#$id .carousel-nav label:hover {
  opacity: .75;
}

---
for f do
  p=$((j * 100))
  j=$((j + 1))
  echo "#$id-$j:checked ~ .carousel-slides { transform: translateX(-$p%); }"
done
---

---
for f do
  n=$((n + 1))
  echo "#$id-$n:checked ~ .carousel-nav-$n,"
done

r=$(((height * 10000) / width))
r=${r%%??}.${r#"${r%%??}"}
---
#$id .carousel-dummy { display: flex;  }
#$id::before{padding-top:$r%}
</style>

<div id="$id" ${style:+"style=\"$style\""}>
---
_set=checked

for f do
  i=$((i + 1))
  echo "<input type='radio' name='$id' id='$id-$i' $_set>"
  _set=
done
---

<div class=carousel-slides>
---
for f do
  k=$((k + 1))
  case $f in
    *.jpg) id= src="$f" alt="" no_caption= cover= use img ;;
    *) echo "<figure><img src='/$f' alt=\"\" loading=lazy></figure>" ;;
  esac
done
---
</div>

<div class="carousel-nav carousel-nav-1">
  <label for="$id-$#"></label>
  <label for="$id-2"></label>
</div>

---
shift $(($# > 1 ? 2 : 0))

for f do
  l=$((l + 1))
  echo "<div class='carousel-nav carousel-nav-$((l + 1))'>"
  echo "<label for='$id-$l'></label>"
  echo "<label for='$id-$((l + 2))'></label>"
  echo "</div>"
done
---

<div class="carousel-nav carousel-nav-$(($# + 2))">
  <label for="$id-$(($# + 1))"></label>
  <label for="$id-1"></label>
</div>

</div>
